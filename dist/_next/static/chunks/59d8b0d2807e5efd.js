(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23261,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(22016),i=e.i(75254);let r=(0,i.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var n=e.i(87316);let d=(0,i.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var o=e.i(69638);let c=(0,i.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var m=e.i(31278),x=e.i(73375);let u=(0,i.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),g=(0,i.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=e.i(98919);let h=(0,i.default)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}]]),y=(0,i.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),b=(0,i.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var N=e.i(1851),f=e.i(34662),j=e.i(77241),v=e.i(81092);function k(e,t){let s,a,l=()=>(0,j.constructFrom)(t?.in,NaN),i=t?.additionalDigits??2,r=function(e){let t,s={},a=e.split(w);if(a.length>2)return s;if(/:/.test(a[0])?t=a[0]:(s.date=a[0],t=a[1],S.test(s.date)&&(s.date=e.split(S)[0],t=e.substr(s.date.length,e.length))),t){let e=M.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(r.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};let l=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?l:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(r.date,i);s=function(e,t){var s,a,l,i,r,n,d,o,c,m;if(null===t)return new Date(NaN);let x=e.match(D);if(!x)return new Date(NaN);let u=!!x[4],g=A(x[1]),p=A(x[2])-1,h=A(x[3]),y=A(x[4]),b=A(x[5])-1;if(u){let e,n;return(s=y,a=b,s>=1&&s<=53&&a>=0&&a<=6)?(l=t,i=y,r=b,(e=new Date(0)).setUTCFullYear(l,0,4),n=e.getUTCDay()||7,e.setUTCDate(e.getUTCDate()+((i-1)*7+r+1-n)),e):new Date(NaN)}{let e=new Date(0);return(n=t,d=p,o=h,d>=0&&d<=11&&o>=1&&o<=(E[d]||(L(n)?29:28))&&(c=t,(m=g)>=1&&m<=(L(c)?366:365)))?(e.setUTCFullYear(t,p,Math.max(g,h)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return l();let n=+s,d=0;if(r.time&&isNaN(d=function(e){var t,s,a;let l=e.match(C);if(!l)return NaN;let i=I(l[1]),r=I(l[2]),n=I(l[3]);return(t=i,s=r,a=n,24===t?0===s&&0===a:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25)?i*f.millisecondsInHour+r*f.millisecondsInMinute+1e3*n:NaN}(r.time)))return l();if(r.timezone){if(isNaN(a=function(e){var t;if("Z"===e)return 0;let s=e.match(T);if(!s)return 0;let a="+"===s[1]?-1:1,l=parseInt(s[2]),i=s[3]&&parseInt(s[3])||0;return(t=i)>=0&&t<=59?a*(l*f.millisecondsInHour+i*f.millisecondsInMinute):NaN}(r.timezone)))return l()}else{let e=new Date(n+d),s=(0,v.toDate)(0,t?.in);return s.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),s.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),s}return(0,v.toDate)(n+d+a,t?.in)}let w=/[T ]/,S=/[Z ]/i,M=/([Z+-].*)$/,D=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,C=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,T=/^([+-])(\d{2})(?::?(\d{2}))?$/;function A(e){return e?parseInt(e):1}function I(e){return e&&parseFloat(e.replace(",","."))||0}let E=[31,null,31,30,31,30,31,31,30,31,30,31];function L(e){return e%400==0||e%4==0&&e%100!=0}var $=e.i(45110);function B(e,t){let{start:s,end:a}=function(e,t){let[s,a]=(0,$.normalizeDates)(e,t.start,t.end);return{start:s,end:a}}(t?.in,e),l=+s>+a,i=l?+s:+a,r=l?a:s;r.setHours(0,0,0,0);let n=t?.step??1;if(!n)return[];n<0&&(n=-n,l=!l);let d=[];for(;+r<=i;)d.push((0,j.constructFrom)(s,r)),r.setDate(r.getDate()+n),r.setHours(0,0,0,0);return l?d.reverse():d}var F=e.i(50516);function H(e,t,s){let a=(0,v.toDate)(e,s?.in);if(isNaN(t))return(0,j.constructFrom)(s?.in||e,NaN);if(!t)return a;let l=a.getDate(),i=(0,j.constructFrom)(s?.in||e,a.getTime());return(i.setMonth(a.getMonth()+t+1,0),l>=i.getDate())?i:(a.setFullYear(i.getFullYear(),i.getMonth(),l),a)}var O=e.i(14522),U=e.i(55024);function R(e,t,s){let a=(0,v.toDate)(e,s?.in);return isNaN(t)?(0,j.constructFrom)(s?.in||e,NaN):(t&&a.setDate(a.getDate()+t),a)}var z=e.i(38036),P=e.i(57356),_=e.i(88235);let Y={pending_payment:{bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200"},awaiting_verification:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"},confirmed:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},completed:{bg:"bg-purple-50",text:"text-purple-700",border:"border-purple-200"},cancelled:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},overbooked:{bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200"}},V={lashes:"bg-pink-400",nails:"bg-purple-400",brows:"bg-amber-400",hair:"bg-cyan-400",underarm:"bg-emerald-400",airlashes:"bg-rose-400",training:"bg-indigo-400"};function W(){let e=(0,a.useRouter)(),[i,f]=(0,s.useState)("calendar"),[j,w]=(0,s.useState)([]),[S,M]=(0,s.useState)((0,P.getBookingStats)()),[D,C]=(0,s.useState)(!0),[T,A]=(0,s.useState)(""),[I,E]=(0,s.useState)("month"),[L,W]=(0,s.useState)(new Date),[G,K]=(0,s.useState)(null),[Z,q]=(0,s.useState)((0,P.getAvailabilitySettings)()),[J,Q]=(0,s.useState)(""),[X,ee]=(0,s.useState)([]),[et,es]=(0,s.useState)(""),[ea,el]=(0,s.useState)([]),[ei,er]=(0,s.useState)([]),[en,ed]=(0,s.useState)([]),[eo,ec]=(0,s.useState)(null),[em,ex]=(0,s.useState)(""),[eu,eg]=(0,s.useState)("");(0,s.useEffect)(()=>{ep();let e=setInterval(ep,3e4);return()=>clearInterval(e)},[]);let ep=()=>{w((0,P.getAllBookings)()),M((0,P.getBookingStats)()),q((0,P.getAvailabilitySettings)()),el((0,z.getAuditLog)()),er((0,z.getActiveSessions)()),ed((0,z.getLoginActivity)()),C(!1)},eh=()=>{(0,z.logoutAdmin)(),e.push("/admin/login")},ey=e=>{if("month"===I)W("prev"===e?H(L,-1,void 0):H(L,1));else if("week"===I)W("prev"===e?R(L,-7,void 0):R(L,7,void 0));else W("prev"===e?R(L,-1,void 0):R(L,1))},eb=()=>{if("month"===I){let e,t,s;return B({start:((e=(0,v.toDate)(L,void 0)).setDate(1),e.setHours(0,0,0,0),e),end:(s=(t=(0,v.toDate)(L,void 0)).getMonth(),t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t)})}if("week"!==I)return[L];{let e,t,s,a;return B({start:(0,O.startOfWeek)(L),end:(e=(0,U.getDefaultOptions)(),t=(void 0)??void 0??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,a=(s=(0,v.toDate)(L,void 0)).getDay(),s.setDate(s.getDate()+((a<t?-7:0)+6-(a-t))),s.setHours(23,59,59,999),s)})}},eN=e=>{let t=(0,N.format)(e,"yyyy-MM-dd");return j.filter(e=>e.date===t)},ef=j.filter(e=>e.customerName.toLowerCase().includes(T.toLowerCase())||e.id.toLowerCase().includes(T.toLowerCase())||e.serviceName.toLowerCase().includes(T.toLowerCase())).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());return D?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-pink-600"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.default,{href:"/",className:"text-2xl font-bold font-serif text-pink-600",children:"StyLash"}),(0,t.jsx)("span",{className:"text-gray-400",children:"|"}),(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Admin Dashboard"})]}),(0,t.jsxs)("button",{onClick:eh,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Logout"]})]})}),(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,t.jsx)("div",{className:"flex gap-1",children:[{id:"calendar",label:"Calendar",icon:n.Calendar},{id:"bookings",label:"Bookings",icon:b},{id:"availability",label:"Availability",icon:g},{id:"security",label:"Security",icon:p.Shield}].map(e=>(0,t.jsxs)("button",{onClick:()=>f(e.id),className:`flex items-center gap-2 px-6 py-4 font-medium text-sm border-b-2 transition-colors ${i===e.id?"border-pink-600 text-pink-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[(0,t.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 flex flex-wrap gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:["Today's Bookings: ",(0,t.jsx)("strong",{className:"text-pink-600",children:S.today})]}),(0,t.jsxs)("span",{children:["This Week's Revenue: ",(0,t.jsxs)("strong",{className:"text-pink-600",children:["₱",S.revenue]})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[{label:"Total",value:S.total,color:"text-gray-900",bg:"bg-gray-50"},{label:"Pending Payment",value:S.pendingPayment,color:"text-yellow-600",bg:"bg-yellow-50"},{label:"Awaiting Verification",value:S.awaitingVerification,color:"text-blue-600",bg:"bg-blue-50"},{label:"Confirmed",value:S.confirmed,color:"text-green-600",bg:"bg-green-50"},{label:"Completed",value:S.completed,color:"text-purple-600",bg:"bg-purple-50"},{label:"Revenue",value:`₱${S.revenue}`,color:"text-pink-600",bg:"bg-pink-50"}].map(e=>(0,t.jsxs)("div",{className:`${e.bg} rounded-xl p-4 text-center`,children:[(0,t.jsx)("p",{className:`text-2xl font-bold ${e.color}`,children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.label})]},e.label))}),"calendar"===i&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["month"===I&&(0,N.format)(L,"MMMM yyyy"),"week"===I&&`Week of ${(0,N.format)((0,O.startOfWeek)(L),"MMM d")}`,"day"===I&&(0,N.format)(L,"EEEE, MMMM d, yyyy")]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>ey("prev"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(x.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>W(new Date),className:"px-3 py-1.5 text-sm bg-gray-100 rounded-lg hover:bg-gray-200",children:"Today"}),(0,t.jsx)("button",{onClick:()=>ey("next"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(u,{className:"w-5 h-5"})})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:["month","week","day"].map(e=>(0,t.jsx)("button",{onClick:()=>E(e),className:`px-3 py-1.5 text-sm rounded-md capitalize ${I===e?"bg-white shadow-sm text-pink-600":"text-gray-600 hover:text-gray-900"}`,children:e},e))})]}),(0,t.jsxs)("div",{className:"p-4",children:["month"===I&&(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:e},e)),eb().map((e,s)=>{let a=eN(e),l=Z.blockedDates.includes((0,N.format)(e,"yyyy-MM-dd")),i=(0,F.isSameDay)(e,new Date),r=function(e,t,s){let[a,l]=(0,$.normalizeDates)(void 0,e,t);return a.getFullYear()===l.getFullYear()&&a.getMonth()===l.getMonth()}(e,L);return(0,t.jsxs)("div",{onClick:()=>K(e),className:`min-h-[100px] p-2 border rounded-lg cursor-pointer hover:border-pink-300 transition-colors ${i?"bg-pink-50 border-pink-300":"bg-white border-gray-200"} ${!r&&"opacity-50"} ${l&&"bg-red-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:`text-sm font-medium ${i?"text-pink-600":"text-gray-700"}`,children:(0,N.format)(e,"d")}),l&&(0,t.jsx)(h,{className:"w-4 h-4 text-red-500"}),a.length>0&&(0,t.jsx)("span",{className:"text-xs bg-pink-100 text-pink-600 px-1.5 py-0.5 rounded-full",children:a.length})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[a.slice(0,3).map(e=>{let s=(0,_.getServiceById)(e.serviceId);return(0,t.jsxs)("div",{className:`text-xs px-1.5 py-0.5 rounded truncate ${V[s?.category||"lashes"]||"bg-gray-400"} text-white`,children:[e.timeSlot," - ",e.customerName.split(" ")[0]]},e.id)}),a.length>3&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",a.length-3," more"]})]})]},s)})]}),("week"===I||"day"===I)&&(0,t.jsx)("div",{className:"space-y-2",children:eb().map(e=>{let s=eN(e),a=Z.blockedDates.includes((0,N.format)(e,"yyyy-MM-dd"));return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:`p-3 font-medium ${a?"bg-red-50 text-red-700":"bg-gray-50 text-gray-700"}`,children:[(0,N.format)(e,"EEEE, MMMM d, yyyy"),a&&(0,t.jsx)("span",{className:"ml-2 text-sm",children:"(Blocked)"})]}),(0,t.jsx)("div",{className:"p-4 space-y-2",children:0===s.length?(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No bookings"}):s.map(e=>{let s=(0,_.getServiceById)(e.serviceId);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full ${V[s?.category||"lashes"]}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.timeSlot}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.serviceName})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-medium",children:e.customerName}),(0,t.jsx)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs ${Y[e.status].bg} ${Y[e.status].text}`,children:e.status.replace("_"," ")})]})]},e.id)})})]},e.toISOString())})})]})]}),"bookings"===i&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search bookings by customer, ID, or service...",value:T,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border rounded-xl focus:border-pink-500 focus:outline-none"})]})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Customer"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Service"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Date & Time"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:ef.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 font-mono text-xs text-gray-600",children:e.id}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.customerName}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.customerPhone})]}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm",children:e.serviceName}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("p",{className:"text-sm",children:(0,N.format)(k(e.date),"MMM d, yyyy")}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.timeSlot})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${Y[e.status].bg} ${Y[e.status].text}`,children:e.status.replace("_"," ")})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["awaiting_verification"===e.status&&(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void((0,P.markPaymentReceived)(t),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"PAYMENT_RECEIVED",target:t,after:"paid",ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ep())},className:"text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-lg hover:bg-green-200 font-medium",children:"Mark Paid"}),("pending_payment"===e.status||"awaiting_verification"===e.status)&&(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void((0,P.cancelBooking)(t,"Cancelled by admin"),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"BOOKING_CANCELLED",target:t,after:"cancelled",ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ep())},className:"text-xs bg-red-100 text-red-700 px-3 py-1.5 rounded-lg hover:bg-red-200 font-medium",children:"Cancel"}),"cancelled"!==e.status&&"completed"!==e.status&&(0,t.jsx)("button",{onClick:()=>{ec(e),ex(e.date),eg(e.timeSlot)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-1.5 rounded-lg hover:bg-blue-200 font-medium",children:"Reschedule"})]})})]},e.id))})]}),0===ef.length&&(0,t.jsx)("p",{className:"text-center text-gray-500 py-12",children:"No bookings found"})]})]}),"availability"===i&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Date-Specific Time Slots"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Set custom available times for specific dates. This overrides the default working hours."}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select Date"}),(0,t.jsx)("input",{type:"date",value:J,onChange:e=>{Q(e.target.value);let t=Z.dateSpecificSlots.find(t=>t.date===e.target.value);t?(ee(t.timeSlots),es(t.note||"")):(ee([]),es(""))},className:"w-full border rounded-lg px-3 py-2"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Note (optional)"}),(0,t.jsx)("input",{type:"text",value:et,onChange:e=>es(e.target.value),placeholder:"e.g., Holiday hours, Special event",className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Available Time Slots"}),(0,t.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2 mb-4",children:P.DEFAULT_TIME_SLOTS.map(e=>(0,t.jsx)("button",{onClick:()=>{X.includes(e)?ee(X.filter(t=>t!==e)):ee([...X,e].sort())},className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${X.includes(e)?"bg-pink-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e},e))}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{J&&X.length>0&&((0,P.setDateSpecificSlots)(J,X,et),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"AVAILABILITY_CHANGED",target:J,after:`${X.length} slots: ${X.join(", ")}`,ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ep(),Q(""),ee([]),es(""))},disabled:!J||0===X.length,className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Time Slots"}),(0,t.jsx)("button",{onClick:()=>{J&&((0,P.markDateFullyBooked)(J,et),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"AVAILABILITY_CHANGED",target:J,after:"Fully Booked",ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ep(),Q(""),ee([]),es(""))},disabled:!J,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Fully Booked"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Configured Dates"}),0===Z.dateSpecificSlots.length?(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No date-specific slots configured"}):Z.dateSpecificSlots.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-blue-900",children:(0,N.format)(k(e.date),"EEEE, MMMM d, yyyy")}),e.isFullyBooked?(0,t.jsx)("p",{className:"text-sm text-orange-600 font-medium",children:"Fully Booked"}):(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[e.timeSlots.length," slots: ",e.timeSlots.slice(0,5).join(", "),e.timeSlots.length>5&&` +${e.timeSlots.length-5} more`]}),e.note&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.note})]}),(0,t.jsx)("button",{onClick:()=>{(0,P.removeDateSpecificSlots)(e.date),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"AVAILABILITY_CHANGED",target:e.date,after:"Removed custom slots",ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ep()},className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(c,{className:"w-5 h-5"})})]},e.date))]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Working Hours"}),(0,t.jsx)("div",{className:"space-y-3",children:Z.workingHours.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"w-24 font-medium",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.day]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.isOpen,onChange:e=>{let t=[...Z.workingHours];t[s].isOpen=e.target.checked,(0,P.updateAvailabilitySettings)({...Z,workingHours:t}),ep()},className:"rounded border-gray-300 text-pink-600 focus:ring-pink-500"}),(0,t.jsx)("span",{className:"text-sm",children:"Open"})]})]}),e.isOpen&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"time",value:e.openTime,onChange:e=>{let t=[...Z.workingHours];t[s].openTime=e.target.value,(0,P.updateAvailabilitySettings)({...Z,workingHours:t}),ep()},className:"text-sm border rounded px-2 py-1"}),(0,t.jsx)("span",{className:"text-gray-500",children:"to"}),(0,t.jsx)("input",{type:"time",value:e.closeTime,onChange:e=>{let t=[...Z.workingHours];t[s].closeTime=e.target.value,(0,P.updateAvailabilitySettings)({...Z,workingHours:t}),ep()},className:"text-sm border rounded px-2 py-1"})]})]},e.day))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Blocked Dates"}),(0,t.jsx)("div",{className:"space-y-2",children:0===Z.blockedDates.length?(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No blocked dates"}):Z.blockedDates.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-medium text-red-700",children:(0,N.format)(k(e),"EEEE, MMMM d, yyyy")}),(0,t.jsx)("button",{onClick:()=>{let t=Z.blockedDates.filter(t=>t!==e);(0,P.updateAvailabilitySettings)({...Z,blockedDates:t}),ep()},className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(c,{className:"w-5 h-5"})})]},e))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Booking Settings"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Lead Time (days)"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Minimum days in advance for bookings"}),(0,t.jsx)("input",{type:"number",min:0,max:30,value:Z.leadTimeDays,onChange:e=>{(0,P.updateAvailabilitySettings)({...Z,leadTimeDays:parseInt(e.target.value)||0}),ep()},className:"w-32 border rounded-lg px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Max Bookings Per Slot"}),(0,t.jsx)("input",{type:"number",min:1,max:10,value:Z.maxBookingsPerSlot,onChange:e=>{(0,P.updateAvailabilitySettings)({...Z,maxBookingsPerSlot:parseInt(e.target.value)||1}),ep()},className:"w-32 border rounded-lg px-3 py-2"})]})]})]})]}),"security"===i&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Active Sessions"}),0===ei.length?(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No active sessions"}):(0,t.jsx)("div",{className:"space-y-2",children:ei.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-800",children:"Current Session"}),(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["IP: ",e.ip]}),(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["Started: ",(0,N.format)(k(e.startedAt),"MMM d, h:mm a")]})]}),(0,t.jsx)("button",{onClick:()=>{(0,z.forceLogoutSession)(e.token),eh()},className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200",children:"Force Logout"})]},e.token))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Login Activity"}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Time"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"IP Address"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:en.slice(0,10).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,N.format)(k(e.timestamp),"MMM d, h:mm a")}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm font-mono text-xs",children:e.ipAddress}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.successful?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:[(0,t.jsx)(o.CheckCircle,{className:"w-3 h-3"})," Success"]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs",children:[(0,t.jsx)(c,{className:"w-3 h-3"})," Failed"]})})]},e.id))})]}),0===en.length&&(0,t.jsx)("p",{className:"text-gray-500 text-sm py-4",children:"No login activity recorded"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Audit Log"}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([["Timestamp,User,Action,Target,Before,After,IP Address",...ea.map(e=>[e.timestamp,e.user,e.actionType,e.target,e.before||"",e.after||"",e.ipAddress].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`audit-log-${(0,N.format)(new Date,"yyyy-MM-dd")}.csv`,s.click()},className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200",children:[(0,t.jsx)(y,{className:"w-4 h-4"}),"Export CSV"]})]}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Time"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Action"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Target"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Details"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:ea.slice(0,20).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2 text-xs",children:(0,N.format)(k(e.timestamp),"MMM d, h:mm a")}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:e.actionType})}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.target}),(0,t.jsxs)("td",{className:"px-4 py-2 text-xs text-gray-600",children:[e.before&&e.after&&(0,t.jsxs)("span",{children:[e.before," → ",e.after]}),e.reason&&(0,t.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.reason,")"]})]})]},e.id))})]}),0===ea.length&&(0,t.jsx)("p",{className:"text-gray-500 text-sm py-4",children:"No audit entries"})]})]})]})]}),eo&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reschedule Booking"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Current:"}),(0,t.jsxs)("p",{className:"font-medium",children:[(0,N.format)(k(eo.date),"MMM d, yyyy")," at ",eo.timeSlot]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"New Date"}),(0,t.jsx)("input",{type:"date",value:em,onChange:e=>ex(e.target.value),className:"w-full border rounded-lg px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"New Time"}),(0,t.jsx)("input",{type:"time",value:eu,onChange:e=>eg(e.target.value),className:"w-full border rounded-lg px-3 py-2"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>{ec(null),ex(""),eg("")},className:"flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{eo&&em&&eu&&((0,P.rescheduleBooking)(eo.id,em,eu),(0,z.addAuditLogEntry)({timestamp:new Date().toISOString(),user:"admin",actionType:"BOOKING_RESCHEDULED",target:eo.id,before:`${eo.date} ${eo.timeSlot}`,after:`${em} ${eu}`,ipAddress:ei[0]?.ip||"unknown",sessionToken:ei[0]?.token||"unknown"}),ec(null),ex(""),eg(""),ep())},className:"flex-1 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700",children:"Reschedule"})]})]})]})})]})}e.s(["default",()=>W],23261)}]);